# Configuracao do Redis para cache de processador de pagamentos + fila de mensagens
# Persistencia minima para confiabilidade da fila de mensagens em ambiente com restricao de memoria
save 300 10
save 60 100

# Define nivel de log como warning para reduzir ruido nos logs
loglevel warning

# Configuracoes de otimizacao de memoria - limite rigoroso de 20MB
maxmemory 20mb
maxmemory-policy volatile-lru

# Desabilita AOF para economizar memoria - usando RDB minimo em vez disso
appendonly no

# Configuracoes de rede
bind 0.0.0.0
port 6379

# Ajustes de performance
tcp-keepalive 300
timeout 0

# Otimizacao para carga de trabalho mista com restricao de memoria (cache + filas)
hash-max-ziplist-entries 64
hash-max-ziplist-value 32
list-max-ziplist-size -1
set-max-intset-entries 64

# Otimizacoes adicionais de memoria
activerehashing yes
stop-writes-on-bgsave-error no
